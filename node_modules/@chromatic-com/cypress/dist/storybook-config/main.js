'use strict';

var n = require('path');
var fs = require('fs');
var promises = require('fs/promises');
var crypto = require('crypto');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var n__default = /*#__PURE__*/_interopDefault(n);

var T=Object.defineProperty;var t=(e,r)=>T(e,"name",{value:r,configurable:!0}),p=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,s)=>(typeof require<"u"?require:r)[s]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var S=Object.defineProperty,i=t((e,r)=>S(e,"name",{value:r,configurable:!0}),"r");function m(){return process.cwd()}t(m,"A");i(m,"rootDir");function v(){let{CHROMATIC_ARCHIVE_LOCATION:e}=process.env;return e}t(v,"E");i(v,"outputDirOverride");function o(e){let r=v()||e;return n__default.default.resolve(m(),r,"chromatic-archives")}t(o,"u");i(o,"archivesDir");function w(e){return n__default.default.resolve(o(e),"archive")}t(w,"L");i(w,"assetsDir");function L(e){let r=o(e);if(!fs.existsSync(r))throw new Error(`Chromatic archives directory cannot be found: ${r}

Please make sure that you have run your E2E tests, or have set the CHROMATIC_ARCHIVE_LOCATION env var if the output directory for the tests is not in the standard location.`)}t(L,"T");i(L,"checkArchivesDirExists");function d(e){fs.existsSync(e)||fs.mkdirSync(e,{recursive:!0});}t(d,"g");i(d,"ensureDir");async function D(e,r){return d(n__default.default.dirname(e)),promises.writeFile(e,r,{mode:511})}t(D,"y");i(D,"outputFile");async function b(e,r){return D(e,JSON.stringify(r))}t(b,"k");i(b,"outputJSONFile");async function j(e){let r=await promises.readFile(e);return JSON.parse(r.toString())}t(j,"J");i(j,"readJSONFile");function O(e){return crypto.createHash("shake256",{outputLength:2}).update(e).digest("hex")}t(O,"C");i(O,"hash");var x=255;function J(e,r=x){let s=e.split("/"),a=s.pop();if(a.length<=r)return e;let h=O(a),[A,...F]=a.split("."),u=F.join("."),E=u.length===0?0:u.length+1,g=h.length+E,N=[`${A.slice(0,r-g)}${h}`,u].filter(Boolean).join(".");return [...s,N].join("/")}t(J,"M");i(J,"truncateFileName");var l="cypress/downloads";function y(e){return n__default.default.dirname(p.resolve(n__default.default.join(e,"package.json")))}t(y,"getAbsolutePath");var z={stories:[n__default.default.resolve(o(l),"*.stories.json")],addons:[y("@storybook/addon-essentials"),"."],framework:{name:y("@storybook/server-webpack5"),options:{}},staticDirs:[n__default.default.resolve(o(l),"archive")]};

module.exports = z;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=main.js.map